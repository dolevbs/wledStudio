(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9912:function(e,a,t){Promise.resolve().then(t.bind(t,8098))},34:function(e,a,t){"use strict";var l=t(2265),i="function"==typeof Object.is?Object.is:function(e,a){return e===a&&(0!==e||1/e==1/a)||e!=e&&a!=a},n=l.useState,o=l.useEffect,r=l.useLayoutEffect,s=l.useDebugValue;function d(e){var a=e.getSnapshot;e=e.value;try{var t=a();return!i(e,t)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,a){return a()}:function(e,a){var t=a(),l=n({inst:{value:t,getSnapshot:a}}),i=l[0].inst,c=l[1];return r(function(){i.value=t,i.getSnapshot=a,d(i)&&c({inst:i})},[e,t,a]),o(function(){return d(i)&&c({inst:i}),e(function(){d(i)&&c({inst:i})})},[e]),s(t),t};a.useSyncExternalStore=void 0!==l.useSyncExternalStore?l.useSyncExternalStore:c},3044:function(e,a,t){"use strict";var l=t(2265),i=t(2558),n="function"==typeof Object.is?Object.is:function(e,a){return e===a&&(0!==e||1/e==1/a)||e!=e&&a!=a},o=i.useSyncExternalStore,r=l.useRef,s=l.useEffect,d=l.useMemo,c=l.useDebugValue;a.useSyncExternalStoreWithSelector=function(e,a,t,l,i){var u=r(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;var p=o(e,(u=d(function(){function e(e){if(!s){if(s=!0,o=e,e=l(e),void 0!==i&&m.hasValue){var a=m.value;if(i(a,e))return r=a}return r=e}if(a=r,n(o,e))return a;var t=l(e);return void 0!==i&&i(a,t)?a:(o=e,r=t)}var o,r,s=!1,d=void 0===t?null:t;return[function(){return e(a())},null===d?void 0:function(){return e(d())}]},[a,t,l,i]))[0],u[1]);return s(function(){m.hasValue=!0,m.value=p},[p]),c(p),p}},2558:function(e,a,t){"use strict";e.exports=t(34)},5195:function(e,a,t){"use strict";e.exports=t(3044)},8098:function(e,a,t){"use strict";let l;t.d(a,{StudioShell:function(){return Y}});var i=t(7437),n=t(2265);let o=[{id:0,label:"Solid",metadata:"Solid"},{id:1,label:"Blink",metadata:"Blink@!,Duty cycle;!,!;!;01"},{id:2,label:"Breathe",metadata:"Breathe@!;!,!;!;01"},{id:3,label:"Wipe",metadata:"Wipe@!,!;!,!;!"},{id:4,label:"Wipe Random",metadata:"Wipe Random@!;;!"},{id:5,label:"Random Colors",metadata:"Random Colors@!,Fade time;;!;01"},{id:6,label:"Sweep",metadata:"Sweep@!,!;!,!;!"},{id:7,label:"Dynamic",metadata:"Dynamic@!,!,,,,Smooth;;!"},{id:8,label:"Colorloop",metadata:"Colorloop@!,Saturation;;!;01"},{id:9,label:"Rainbow",metadata:"Rainbow@!,Size;;!"},{id:10,label:"Scan",metadata:"Scan@!,# of dots,,,,,Overlay;!,!,!;!"},{id:11,label:"Scan Dual",metadata:"Scan Dual@!,# of dots,,,,,Overlay;!,!,!;!"},{id:12,label:"Fade",metadata:"Fade@!;!,!;!;01"},{id:13,label:"Theater",metadata:"Theater@!,Gap size;!,!;!"},{id:14,label:"Theater Rainbow",metadata:"Theater Rainbow@!,Gap size;,!;!"},{id:15,label:"Running",metadata:"Running@!,Wave width;!,!;!"},{id:16,label:"Saw",metadata:"Saw@!,Width;!,!;!"},{id:17,label:"Twinkle",metadata:"Twinkle@!,!;!,!;!;;m12=0"},{id:18,label:"Dissolve",metadata:"Dissolve@Repeat speed,Dissolve speed,,,,Random,Complete;!,!;!"},{id:19,label:"Dissolve Rnd",metadata:"Dissolve Rnd@Repeat speed,Dissolve speed;,!;!"},{id:20,label:"Sparkle",metadata:"Sparkle@!,,,,,,Overlay;!,!;!;;m12=0"},{id:21,label:"Sparkle Dark",metadata:"Sparkle Dark@!,!,,,,,Overlay;Bg,Fx;!;;m12=0"},{id:22,label:"Sparkle+",metadata:"Sparkle+@!,!,,,,,Overlay;Bg,Fx;!;;m12=0"},{id:23,label:"Strobe",metadata:"Strobe@!;!,!;!;01"},{id:24,label:"Strobe Rainbow",metadata:"Strobe Rainbow@!;,!;!;01"},{id:25,label:"Strobe Mega",metadata:"Strobe Mega@!,!;!,!;!;01"},{id:26,label:"Blink Rainbow",metadata:"Blink Rainbow@Frequency,Blink duration;!,!;!;01"},{id:27,label:"Android",metadata:"Android@!,Width;!,!;!;;m12=1"},{id:28,label:"Chase",metadata:"Chase@!,Width;!,!,!;!"},{id:29,label:"Chase Random",metadata:"Chase Random@!,Width;!,,!;!"},{id:30,label:"Chase Rainbow",metadata:"Chase Rainbow@!,Width;!,!;!"},{id:31,label:"Chase Flash",metadata:"Chase Flash@!;Bg,Fx;!"},{id:32,label:"Chase Flash Rnd",metadata:"Chase Flash Rnd@!;!,!;!"},{id:33,label:"Rainbow Runner",metadata:"Rainbow Runner@!,Size;Bg;!"},{id:34,label:"Colorful",metadata:"Colorful@!,Saturation;1,2,3;!"},{id:35,label:"Traffic Light",metadata:"Traffic Light@!,US style;,!;!"},{id:36,label:"Sweep Random",metadata:"Sweep Random@!;;!"},{id:37,label:"Chase 2",metadata:"Chase 2@!,Width;!,!;!"},{id:38,label:"Aurora",metadata:"Aurora@!,!;1,2,3;!;;sx=24,pal=50"},{id:39,label:"Stream",metadata:"Stream@!,Zone size;;!"},{id:40,label:"Scanner",metadata:"Scanner@!,Trail,Delay,,,Dual,Bi-delay;!,!,!;!;;m12=0,c1=0"},{id:41,label:"Lighthouse",metadata:"Lighthouse@!,Fade rate;!,!;!"},{id:42,label:"Fireworks",metadata:"Fireworks@,Frequency;!,!;!;12;ix=192,pal=11"},{id:43,label:"Rain",metadata:"Rain@!,Spawning rate;!,!;!;12;ix=128,pal=0"},{id:44,label:"Tetrix",metadata:"Tetrix@!,Width,,,,One color;!,!;!;;sx=0,ix=0,pal=11,m12=1"},{id:45,label:"Fire Flicker",metadata:"Fire Flicker@!,!;!;!;01"},{id:46,label:"Gradient",metadata:"Gradient@!,Spread;!,!;!;;ix=16"},{id:47,label:"Loading",metadata:"Loading@!,Fade;!,!;!;;ix=16"},{id:48,label:"Rolling Balls",metadata:"Rolling Balls@!,# of balls,,,,Collide,Overlay,Trails;!,!,!;!;1;m12=1"},{id:49,label:"Fairy",metadata:"Fairy@!,# of flashers;!,!;!"},{id:50,label:"Two Dots",metadata:"Two Dots@!,Dot size,,,,,Overlay;1,2,Bg;!"},{id:51,label:"Fairytwinkle",metadata:"Fairytwinkle@!,!;!,!;!;;m12=0"},{id:52,label:"Running Dual",metadata:"Running Dual@!,Wave width;L,!,R;!"},{id:53,label:"Image",metadata:"Image@!,Blur,;;;12;sx=128,ix=0"},{id:54,label:"Chase 3",metadata:"Chase 3@!,Size;1,2,3;!"},{id:55,label:"Tri Wipe",metadata:"Tri Wipe@!;1,2,3;!"},{id:56,label:"Tri Fade",metadata:"Tri Fade@!;1,2,3;!"},{id:57,label:"Lightning",metadata:"Lightning@!,!,,,,,Overlay;!,!;!"},{id:58,label:"ICU",metadata:"ICU@!,!,,,,,Overlay;!,!;!"},{id:59,label:"Multi Comet",metadata:"Multi Comet@!,Fade;!,!;!;1"},{id:60,label:"Scanner Dual",metadata:"Scanner Dual@!,Trail,Delay,,,Dual,Bi-delay;!,!,!;!;;m12=0,c1=0"},{id:61,label:"Stream 2",metadata:"Stream 2@!;;"},{id:62,label:"Oscillate",metadata:"Oscillate"},{id:63,label:"Pride 2015",metadata:"Pride 2015@!;;"},{id:64,label:"Juggle",metadata:"Juggle@!,Trail;;!;;sx=64,ix=128"},{id:65,label:"Palette",metadata:"Palette@Shift,Size,Rotation,,,Animate Shift,Animate Rotation,Anamorphic;;!;12;ix=112,c1=0,o1=1,o2=0,o3=1"},{id:66,label:"Fire 2012",metadata:"Fire 2012@Cooling,Spark rate,,2D Blur,Boost;;!;1;pal=35,sx=64,ix=160,m12=1,c2=128"},{id:67,label:"Colorwaves",metadata:"Colorwaves@!,Hue;!;!;;pal=26"},{id:68,label:"Bpm",metadata:"Bpm@!;!;!;;sx=64"},{id:69,label:"Fill Noise",metadata:"Fill Noise@!;!;!"},{id:70,label:"Noise 1",metadata:"Noise 1@!;!;!;;pal=20"},{id:71,label:"Noise 2",metadata:"Noise 2@!;!;!;;pal=43"},{id:72,label:"Noise 3",metadata:"Noise 3@!;!;!;;pal=35"},{id:73,label:"Noise 4",metadata:"Noise 4@!;!;!;;pal=26"},{id:74,label:"Colortwinkles",metadata:"Colortwinkles@Fade speed,Spawn speed;;!;;m12=0"},{id:75,label:"Lake",metadata:"Lake@!;Fx;!"},{id:76,label:"Meteor",metadata:"Meteor@!,Trail,,,,Gradient,,Smooth;;!;1"},{id:77,label:"Copy Segment",metadata:"Copy Segment@,Color shift,Lighten,Brighten,ID,Axis(2D),FullStack(last frame);;;12;ix=0,c1=0,c2=0,c3=0"},{id:78,label:"Railway",metadata:"Railway@!,Smoothness;1,2;!;;pal=3"},{id:79,label:"Ripple",metadata:"Ripple@!,Wave #,Blur,,,,Overlay;,!;!;12;c1=0"},{id:80,label:"Twinklefox",metadata:"Twinklefox@!,Twinkle rate,,,,Cool;!,!;!"},{id:81,label:"Twinklecat",metadata:"Twinklecat@!,Twinkle rate,,,,Cool,Reverse;!,!;!"},{id:82,label:"Halloween Eyes",metadata:"Halloween Eyes@Eye off time,Eye on time,,,,,Overlay;!,!;!;12"},{id:83,label:"Solid Pattern",metadata:"Solid Pattern@Fg size,Bg size;Fg,!;!;;pal=0"},{id:84,label:"Solid Pattern Tri",metadata:"Solid Pattern Tri@,Size;1,2,3;;;pal=0"},{id:85,label:"Spots",metadata:"Spots@Spread,Width,,,,,Overlay;!,!;!"},{id:86,label:"Spots Fade",metadata:"Spots Fade@Spread,Width,,,,,Overlay;!,!;!"},{id:87,label:"Glitter",metadata:"Glitter@!,!,,,,,Overlay;,,Glitter color;!;;pal=11,m12=0"},{id:88,label:"Candle",metadata:"Candle@!,!;!,!;!;01;sx=96,ix=224,pal=0"},{id:89,label:"Fireworks Starburst",metadata:"Fireworks Starburst@Chance,Fragments,,,,,Overlay;,!;!;;pal=11,m12=0"},{id:90,label:"Fireworks 1D",metadata:"Fireworks 1D@Gravity,Firing side;!,!;!;12;pal=11,ix=128"},{id:91,label:"Bouncing Balls",metadata:"Bouncing Balls@Gravity,# of balls,,,,,Overlay;!,!,!;!;1;m12=1"},{id:92,label:"Sinelon",metadata:"Sinelon@!,Trail;!,!,!;!"},{id:93,label:"Sinelon Dual",metadata:"Sinelon Dual@!,Trail;!,!,!;!"},{id:94,label:"Sinelon Rainbow",metadata:"Sinelon Rainbow@!,Trail;,,!;!"},{id:95,label:"Popcorn",metadata:"Popcorn@!,!,,,,,Overlay;!,!,!;!;;m12=1"},{id:96,label:"Drip",metadata:"Drip@Gravity,# of drips,,,,,Overlay;!,!;!;;m12=1"},{id:97,label:"Plasma",metadata:"Plasma@Phase,!;!;!"},{id:98,label:"Percent",metadata:"Percent@!,% of fill,,,,One color;!,!;!"},{id:99,label:"Ripple Rainbow",metadata:"Ripple Rainbow@!,Wave #;;!;12"},{id:100,label:"Heartbeat",metadata:"Heartbeat@!,!;!,!;!;01;m12=1"},{id:101,label:"Pacifica",metadata:"Pacifica@!,Angle;;!;;pal=51"},{id:102,label:"Candle Multi",metadata:"Candle Multi@!,!;!,!;!;;sx=96,ix=224,pal=0"},{id:103,label:"Solid Glitter",metadata:"Solid Glitter@,!;Bg,,Glitter color;;;m12=0"},{id:104,label:"Sunrise",metadata:"Sunrise@Time [min],Width;;!;;pal=35,sx=60"},{id:105,label:"Phased",metadata:"Phased@!,!;!,!;!"},{id:106,label:"Twinkleup",metadata:"Twinkleup@!,Intensity;!,!;!;;m12=0"},{id:107,label:"Noise Pal",metadata:"Noise Pal@!,Scale;;!"},{id:108,label:"Sine",metadata:"Sine@!,Scale;;!"},{id:109,label:"Phased Noise",metadata:"Phased Noise@!,!;!,!;!"},{id:110,label:"Flow",metadata:"Flow@!,Zones;;!;;m12=1"},{id:111,label:"Chunchun",metadata:"Chunchun@!,Gap size;!,!;!"},{id:112,label:"Dancing Shadows",metadata:"Dancing Shadows@!,# of shadows;!;!"},{id:113,label:"Washing Machine",metadata:"Washing Machine@!,!;;!"},{id:114,label:"Rotozoomer",metadata:"Rotozoomer@!,Scale,,,,Alt;;!;2;pal=54"},{id:115,label:"Blends",metadata:"Blends@Shift speed,Blend speed;;!"},{id:116,label:"TV Simulator",metadata:"TV Simulator@!,!;;!;01"},{id:117,label:"Dynamic Smooth",metadata:"Dynamic Smooth@!,!;;!"},{id:118,label:"Spaceships",metadata:"Spaceships@!,Blur,,,,Smear;;!;2"},{id:119,label:"Crazy Bees",metadata:"Crazy Bees@!,Blur,,,,Smear;;!;2;pal=11,ix=0"},{id:120,label:"Ghost Rider",metadata:"Ghost Rider@Fade rate,Blur;;!;2"},{id:121,label:"Blobs",metadata:"Blobs@!,# blobs,Blur,Trail;!;!;2;c1=8"},{id:122,label:"Scrolling Text",metadata:"Scrolling Text@!,Y Offset,Trail,Font size,Rotate,Gradient,,Reverse;!,!,Gradient;!;2;ix=128,c1=0,rev=0,mi=0,rY=0,mY=0"},{id:123,label:"Drift Rose",metadata:"Drift Rose@Fade,Blur,,,,Smear;;!;2;pal=11"},{id:124,label:"Distortion Waves",metadata:"Distortion Waves@!,Scale,,,,Fill,Zoom,Alt;;!;2;pal=0"},{id:125,label:"Soap",metadata:"Soap@!,Smoothness,Density;;!;2;pal=11"},{id:126,label:"Octopus",metadata:"Octopus@!,,Offset X,Offset Y,Legs,fasttan;;!;2;"},{id:127,label:"Waving Cell",metadata:"Waving Cell@!,Blur,Amplitude 1,Amplitude 2,Amplitude 3,,Flow;;!;2;ix=0"},{id:128,label:"Pixels",metadata:"Pixels@Fade rate,# of pixels;!,!;!;1v;m12=0,si=0"},{id:129,label:"Pixelwave",metadata:"Pixelwave@!,Sensitivity;!,!;!;1v;ix=64,m12=2,si=0"},{id:130,label:"Juggles",metadata:"Juggles@!,# of balls;!,!;!;01v;m12=0,si=0"},{id:131,label:"Matripix",metadata:"Matripix@!,Brightness;!,!;!;1v;ix=64,m12=2,si=1"},{id:132,label:"Gravimeter",metadata:"Gravimeter@Rate of fall,Sensitivity;!,!;!;1v;ix=128,m12=2,si=0"},{id:133,label:"Plasmoid",metadata:"Plasmoid@Phase,# of pixels;!,!;!;01v;sx=128,ix=128,m12=0,si=0"},{id:134,label:"Puddles",metadata:"Puddles@Fade rate,Puddle size;!,!;!;1v;m12=0,si=0"},{id:135,label:"Midnoise",metadata:"Midnoise@Fade rate,Max. length;!,!;!;1v;ix=128,m12=1,si=0"},{id:136,label:"Noisemeter",metadata:"Noisemeter@Fade rate,Width;!,!;!;1v;ix=128,m12=2,si=0"},{id:137,label:"Freqwave",metadata:"Freqwave@Speed,Sound effect,Low bin,High bin,Pre-amp;;;01f;m12=2,si=0"},{id:138,label:"Freqmatrix",metadata:"Freqmatrix@Speed,Sound effect,Low bin,High bin,Sensitivity;;;01f;m12=3,si=0"},{id:139,label:"GEQ",metadata:"GEQ@Fade speed,Ripple decay,# of bands,,Bin,Color bars;!,,Peaks;!;2f;c1=255,c2=64,pal=11,si=0,c3=0"},{id:140,label:"Waterfall",metadata:"Waterfall@!,Adjust color,Select bin,Volume (min);!,!;!;01f;c2=0,m12=2,si=0"},{id:141,label:"Freqpixels",metadata:"Freqpixels@Fade rate,Starting color and # of pixels;!,!,;!;1f;m12=0,si=0"},{id:143,label:"Noisefire",metadata:"Noisefire@!,!;;;01v;m12=2,si=0"},{id:144,label:"Puddlepeak",metadata:"Puddlepeak@Fade rate,Puddle size,Select bin,Volume (min);!,!;!;1v;c2=0,m12=0,si=0"},{id:145,label:"Noisemove",metadata:"Noisemove@Move speed,Fade rate;!,!;!;01f;m12=0,si=0"},{id:146,label:"Noise2D",metadata:"Noise2D@!,Scale;;!;2"},{id:147,label:"Perlin Move",metadata:"Perlin Move@!,# of pixels,Fade rate;!,!;!"},{id:148,label:"Ripple Peak",metadata:"Ripple Peak@Fade rate,Max # of ripples,Select bin,Volume (min);!,!;!;1v;c2=0,m12=0,si=0"},{id:149,label:"Firenoise",metadata:"Firenoise@X scale,Y scale,,,,Palette;;!;2;pal=66"},{id:150,label:"Squared Swirl",metadata:"Squared Swirl@,Fade,,,Blur;;!;2"},{id:151,label:"PacMan",metadata:"PacMan@Speed,# of PowerDots,Blink distance,Blur,# of Ghosts,Dots,Smear,Compact;;!;1;m12=0,sx=192,ix=64,c1=64,c2=0,c3=12,o1=1,o2=0"},{id:152,label:"DNA",metadata:"DNA@Scroll speed,Blur,,,,Smear;;!;2;ix=0"},{id:153,label:"Matrix",metadata:"Matrix@!,Spawning rate,Trail,,,Custom color;Spawn,Trail;;2"},{id:154,label:"Metaballs",metadata:"Metaballs@!;;!;2"},{id:155,label:"Freqmap",metadata:"Freqmap@Fade rate,Starting color;!,!;!;1f;m12=0,si=0"},{id:156,label:"Gravcenter",metadata:"Gravcenter@Rate of fall,Sensitivity;!,!;!;1v;ix=128,m12=2,si=0"},{id:157,label:"Gravcentric",metadata:"Gravcentric@Rate of fall,Sensitivity;!,!;!;1v;ix=128,m12=3,si=0"},{id:158,label:"Gravfreq",metadata:"Gravfreq@Rate of fall,Sensitivity;!,!;!;1f;ix=128,m12=0,si=0"},{id:159,label:"DJ Light",metadata:"DJ Light@Speed;;;01f;m12=2,si=0"},{id:160,label:"Funky Plank",metadata:"Funky Plank@Scroll speed,,# of bands;;;2f;si=0"},{id:161,label:"Shimmer",metadata:"Shimmer@Speed,Interval,Size,Granular,Flow,Zebra,Reverse,Sporadic;Fx,Bg,Cx;!;1;pal=15,sx=220,ix=10,c2=0,c3=0"},{id:162,label:"Pulser",metadata:"Pulser@!,Blur;;!;2"},{id:163,label:"Blurz",metadata:"Blurz@Fade rate,Blur;!,Color mix;!;1f;m12=0,si=0"},{id:164,label:"Drift",metadata:"Drift@Rotation speed,Blur,,,,Twin,Smear;;!;2;ix=0"},{id:165,label:"Waverly",metadata:"Waverly@Amplification,Sensitivity,,,,,Blur;;!;2v;ix=64,si=0"},{id:166,label:"Sun Radiation",metadata:"Sun Radiation@Variance,Brightness;;;2"},{id:167,label:"Colored Bursts",metadata:"Colored Bursts@Speed,# of lines,,,Blur,Gradient,Smear,Dots;;!;2;c3=16"},{id:168,label:"Julia",metadata:"Julia@,Max iterations per pixel,X center,Y center,Area size, Blur;!;!;2;ix=24,c1=128,c2=128,c3=16"},{id:172,label:"Game Of Life",metadata:"Game Of Life@!,,Blur,,,,,Mutation;!,!;!;2;pal=11,sx=128"},{id:173,label:"Tartan",metadata:"Tartan@X scale,Y scale,,,Sharpness;;!;2"},{id:174,label:"Polar Lights",metadata:"Polar Lights@!,Scale,,,,Flip Palette;;!;2;pal=71"},{id:175,label:"Swirl",metadata:"Swirl@!,Sensitivity,Blur;,Bg Swirl;!;2v;ix=64,si=0"},{id:176,label:"Lissajous",metadata:"Lissajous@X frequency,Fade rate,Blur,,Speed,Smear;!;!;2;c1=0"},{id:177,label:"Frizzles",metadata:"Frizzles@X frequency,Y frequency,Blur,,,Smear;;!;2"},{id:178,label:"Plasma Ball",metadata:"Plasma Ball@Speed,,Fade,Blur;;!;2"},{id:179,label:"Flow Stripe",metadata:"Flow Stripe@Hue speed,Effect speed;;!;pal=11"},{id:180,label:"Hiphotic",metadata:"Hiphotic@X scale,Y scale,,,Speed;!;!;2"},{id:181,label:"Sindots",metadata:"Sindots@!,Dot distance,Fade rate,Blur,,Smear;;!;2;"},{id:182,label:"DNA Spiral",metadata:"DNA Spiral@Scroll speed,Y frequency,Blur,,,Smear;;!;2;c1=0"},{id:183,label:"Black Hole",metadata:"Black Hole@Fade rate,Outer Y freq.,Outer X freq.,Inner X freq.,Inner Y freq.,Solid,,Blur;!;!;2;pal=11"},{id:184,label:"Wavesins",metadata:"Wavesins@!,Brightness variation,Starting color,Range of colors,Color variation;!;!"},{id:185,label:"Rocktaves",metadata:"Rocktaves@;!,!;!;01f;m12=1,si=0"},{id:186,label:"Akemi",metadata:"Akemi@Color speed,Dance;Head palette,Arms & Legs,Eyes & Mouth;Face palette;2f;si=0"},{id:187,label:"PS Volcano",metadata:"PS Volcano@Speed,Intensity,Move,Bounce,Spread,AgeColor,Walls,Collide;;!;2;pal=35,sx=100,ix=190,c1=0,c2=160,c3=6,o1=1"},{id:188,label:"PS Fire",metadata:"PS Fire@Speed,Intensity,Flame Height,Wind,Spread,Smooth,Cylinder,Turbulence;;!;2;pal=35,sx=110,c1=110,c2=50,c3=31,o1=1"},{id:189,label:"PS Fireworks",metadata:"PS Fireworks@Launches,Explosion Size,Fuse,Blur,Gravity,Cylinder,Ground,Fast;;!;2;pal=11,ix=50,c1=40,c2=0,c3=12"},{id:190,label:"PS Vortex",metadata:"PS Vortex@Rotation Speed,Particle Speed,Arms,Flip,Nozzle,Smear,Direction,Random Flip;;!;2;pal=27,c1=200,c2=0,c3=0"},{id:191,label:"PS Fuzzy Noise",metadata:"PS Fuzzy Noise@Speed,Particles,Bounce,Friction,Scale,Cylinder,Smear,Collide;;!;2;pal=64,sx=50,ix=200,c1=130,c2=30,c3=5,o3=1"},{id:192,label:"PS Ballpit",metadata:"PS Ballpit@Speed,Intensity,Size,Hardness,Saturation,Cylinder,Walls,Ground;;!;2;pal=11,sx=100,ix=220,c1=70,c2=180,c3=31,o3=1"},{id:193,label:"PS Box",metadata:"PS Box@!,Particles,Tilt,Hardness,Size,Random,Washing Machine,Sloshing;;!;2;pal=53,ix=50,c3=1,o1=1"},{id:194,label:"PS Attractor",metadata:"PS Attractor@Mass,Particles,Size,Collide,Friction,AgeColor,Move,Swallow;;!;2;pal=9,sx=100,ix=82,c1=2,c2=0"},{id:195,label:"PS Impact",metadata:"PS Impact@Launches,!,Force,Hardness,Blur,Cylinder,Walls,Collide;;!;2;pal=0,sx=32,ix=85,c1=70,c2=130,c3=0,o3=1"},{id:196,label:"PS Waterfall",metadata:"PS Waterfall@Speed,Intensity,Variation,Collide,Position,Cylinder,Walls,Ground;;!;2;pal=9,sx=15,ix=200,c1=32,c2=160,o3=1"},{id:197,label:"PS Spray",metadata:"PS Spray@Speed,!,Left/Right,Up/Down,Angle,Gravity,Cylinder/Square,Collide;;!;2v;pal=0,sx=150,ix=150,c1=220,c2=30,c3=21"},{id:198,label:"PS GEQ 2D",metadata:"PS GEQ 2D@Speed,Intensity,Diverge,Bounce,Gravity,Cylinder,Walls,Floor;;!;2f;pal=0,sx=155,ix=200,c1=0"},{id:199,label:"PS GEQ Nova",metadata:"PS GEQ Nova@Speed,Intensity,Rotation Speed,Color Change,Nozzle,,Direction;;!;2f;pal=13,ix=180,c1=0,c2=0,c3=8"},{id:200,label:"PS Ghost Rider",metadata:"PS Ghost Rider@Speed,Spiral,Blur,Color Cycle,Spread,AgeColor,Walls;;!;2;pal=1,sx=70,ix=0,c1=220,c2=30,c3=21,o1=1"},{id:201,label:"PS Blobs",metadata:"PS Blobs@Speed,Blobs,Size,Life,Blur,Wobble,Collide,Pulsate;;!;2v;sx=30,ix=64,c1=200,c2=130,c3=0,o3=1"},{id:202,label:"PS DripDrop",metadata:"PS DripDrop@Speed,!,Splash,Blur,Gravity,Rain,PushSplash,Smooth;,!;!;1;pal=0,sx=150,ix=25,c1=220,c2=30,c3=21"},{id:203,label:"PS Pinball",metadata:"PS Pinball@Speed,!,Size,Blur,Gravity,Collide,Rolling,Position Color;,!;!;1;pal=0,ix=220,c2=0,c3=8,o1=1"},{id:204,label:"PS Dancing Shadows",metadata:"PS Dancing Shadows@Speed,!,Blur,Color Cycle,,Smear,Position Color,Smooth;,!;!;1;sx=100,ix=180,c1=0,c2=0"},{id:205,label:"PS Fireworks 1D",metadata:"PS Fireworks 1D@Gravity,Explosion,Firing side,Blur,Color,Colorful,Trail,Smooth;,!;!;1;c2=30,o1=1"},{id:206,label:"PS Sparkler",metadata:"PS Sparkler@Move,!,Saturation,Blur,Sparklers,Slide,Bounce,Large;,!;!;1;pal=0,sx=255,c1=0,c2=0,c3=6"},{id:207,label:"PS Hourglass",metadata:"PS Hourglass@Interval,!,Color,Blur,Gravity,Colorflip,Start,Fast Reset;,!;!;1;pal=34,sx=5,ix=200,c1=140,c2=80,c3=4,o1=1,o2=1,o3=1"},{id:208,label:"PS Spray 1D",metadata:"PS Spray 1D@Speed(+/-),!,Position,Blur,Gravity(+/-),AgeColor,Bounce,Position Color;,!;!;1;sx=200,ix=220,c1=0,c2=0"},{id:209,label:"PS 1D Balance",metadata:"PS 1D Balance@!,!,Hardness,Blur,Tilt,Position Color,Wrap,Random;,!;!;1;pal=18,c2=0,c3=4,o1=1"},{id:210,label:"PS Chase",metadata:"PS Chase@!,Density,Size,Hue,Blur,Playful,,Position Color;,!;!;1;pal=11,sx=50,c2=5,c3=0"},{id:211,label:"PS Starburst",metadata:"PS Starburst@Chance,Fragments,Size,Blur,Cooling,Gravity,Colorful,Push;,!;!;1;pal=52,sx=150,ix=150,c1=120,c2=0,c3=21"},{id:212,label:"PS GEQ 1D",metadata:"PS GEQ 1D@Speed,!,Size,Blur,,,,;,!;!;1f;pal=0,sx=50,ix=200,c1=0,c2=0,c3=0,o1=1,o2=1"},{id:213,label:"PS Fire 1D",metadata:"PS Fire 1D@!,!,Cooling,Blur;,!;!;1;pal=35,sx=100,ix=50,c1=80,c2=100,c3=28,o1=1,o2=1"},{id:214,label:"PS Sonic Stream",metadata:"PS Sonic Stream@!,!,Color,Blur,Bin,Mod,Filter,Push;,!;!;1f;c3=0,o2=1"},{id:215,label:"PS Sonic Boom",metadata:"PS Sonic Boom@!,!,Color,Position,Bin,Mod,Filter,Blur;,!;!;1f;c2=63,c3=0,o2=1"},{id:216,label:"PS Springy",metadata:"PS Springy@Stiffness,Damping,Density,Hue,Mode,Smear,XL,AR;,!;!;1f;pal=54,c2=0,c3=23"},{id:217,label:"PS Galaxy",metadata:"PS Galaxy@!,!,Size,,Color,,Starfield,Trace;;!;2;pal=59,sx=80,c1=1,c3=4"}],r={sx:"Speed",ix:"Intensity",pal:"Palette",c1:"Custom 1",c2:"Custom 2"},s=["sx","ix","c1","c2"],d={0:[{key:"c1",label:"Blend",min:0,max:255,defaultValue:0}],1:[{key:"sx",label:"Rate",min:0,max:255,defaultValue:128},{key:"c1",label:"Off Glow",min:0,max:255,defaultValue:0}],2:[{key:"sx",label:"Rate",min:0,max:255,defaultValue:128},{key:"c1",label:"Depth",min:0,max:255,defaultValue:0}],8:[{key:"sx",label:"Speed",min:0,max:255,defaultValue:128},{key:"ix",label:"Saturation",min:0,max:255,defaultValue:128},{key:"pal",label:"Palette Mode",min:0,max:255,step:1,defaultValue:0}],9:[{key:"sx",label:"Speed",min:0,max:255,defaultValue:128},{key:"ix",label:"Saturation",min:0,max:255,defaultValue:128},{key:"c1",label:"Cycle Spread",min:0,max:255,defaultValue:0},{key:"pal",label:"Palette Mode",min:0,max:255,step:1,defaultValue:0}],20:[{key:"sx",label:"Twinkle Rate",min:0,max:255,defaultValue:128},{key:"ix",label:"Density",min:0,max:255,defaultValue:128},{key:"c1",label:"Secondary Mix",min:0,max:255,defaultValue:0},{key:"pal",label:"Palette Mode",min:0,max:255,step:1,defaultValue:0}],28:[{key:"sx",label:"Speed",min:0,max:255,defaultValue:128},{key:"c1",label:"Spacing",min:0,max:255,defaultValue:0},{key:"c2",label:"Tail",min:0,max:255,defaultValue:0}]},c=o.map(e=>{var a;let t=function(e){var a,t,l,i,n;if(!e.includes("@"))return[];let o=(null!==(t=null===(a=e.split("@")[1])||void 0===a?void 0:a.split(";")[0])&&void 0!==t?t:"").split(",").map(e=>e.trim()),d=[];for(let e=0;e<s.length;e+=1){let a=null!==(l=o[e])&&void 0!==l?l:"";if(!a)continue;let t=s[e];d.push({key:t,label:(i=a,n=t,i.replace(/!/g,"").trim()||r[n]),min:0,max:255,defaultValue:"sx"===t||"ix"===t?128:0})}return 0===d.length?[]:d}(e.metadata),l=null!==(a=d[e.id])&&void 0!==a?a:t,i=/(?:^|;)2[a-z]*(?:;|$)/i.test(e.metadata);return{id:e.id,label:e.label,controls:l,is2d:i}}).filter(e=>!e.is2d),u=[{id:"amber",label:"Amber Glow",pal:0,col:[[255,170,0],[0,0,0],[0,0,0]]},{id:"sunset",label:"Sunset",pal:1,col:[[255,110,60],[255,20,120],[80,0,160]]},{id:"ocean",label:"Ocean",pal:2,col:[[0,170,255],[0,70,170],[120,255,220]]},{id:"forest",label:"Forest",pal:3,col:[[60,170,80],[200,255,90],[10,70,30]]},{id:"icefire",label:"Ice + Fire",pal:4,col:[[40,130,255],[255,70,30],[255,255,255]]}];function m(e){return Math.max(0,Math.min(255,Math.round(e))).toString(16).padStart(2,"0")}function p(e){return!Array.isArray(e)||e.length<3?"#000000":"#".concat(m(e[0])).concat(m(e[1])).concat(m(e[2]))}function h(e){let a=e.replace("#","");if(6!==a.length)return[0,0,0];let t=Number.parseInt(a.slice(0,2),16),l=Number.parseInt(a.slice(2,4),16),i=Number.parseInt(a.slice(4,6),16);return[Number.isFinite(t)?t:0,Number.isFinite(l)?l:0,Number.isFinite(i)?i:0]}function b(e,a){var t,l,i,n,o;return"sx"===a?null!==(t=null==e?void 0:e.sx)&&void 0!==t?t:128:"ix"===a?null!==(l=null==e?void 0:e.ix)&&void 0!==l?l:128:"pal"===a?null!==(i=null==e?void 0:e.pal)&&void 0!==i?i:0:"c1"===a?null!==(n=null==e?void 0:e.c1)&&void 0!==n?n:0:null!==(o=null==e?void 0:e.c2)&&void 0!==o?o:0}function g(e){var a,t,l,n,o,r,s,d,m;let{command:g,setControl:x,setColorScheme:S,setSegmentColor:f}=e,v=null!==(o=Array.isArray(g.seg)?g.seg[0]:g.seg)&&void 0!==o?o:{fx:8,sx:128,ix:128,pal:0,c1:0,c2:0},y=null!==(r=v.fx)&&void 0!==r?r:8,w=c.find(e=>e.id===y),C=null!==(s=null==w?void 0:w.controls)&&void 0!==s?s:[{key:"sx",label:"Speed",min:0,max:255,defaultValue:128},{key:"ix",label:"Intensity",min:0,max:255,defaultValue:128}],N=c.slice(0,20);return(0,i.jsxs)("section",{className:"panelShell cardSection controlDeck",children:[(0,i.jsxs)("div",{className:"controlColumn",children:[(0,i.jsx)("h3",{className:"columnTitle",children:"Color"}),(0,i.jsxs)("label",{className:"colorWheelField",children:[(0,i.jsx)("span",{className:"srOnly",children:"Primary color"}),(0,i.jsx)("input",{type:"color",value:p(null==v?void 0:null===(a=v.col)||void 0===a?void 0:a[0]),onChange:e=>f(0,h(e.target.value))})]}),(0,i.jsxs)("label",{className:"fieldLabel",children:["Brightness (",null!==(d=g.bri)&&void 0!==d?d:128,")",(0,i.jsx)("input",{type:"range",min:0,max:255,value:null!==(m=g.bri)&&void 0!==m?m:128,onChange:e=>x("bri",Number(e.target.value))})]}),(0,i.jsx)("div",{className:"swatchRow","aria-label":"Quick palette colors",children:u.map(e=>(0,i.jsx)("button",{type:"button",className:"swatchButton",style:{background:"linear-gradient(120deg, rgb(".concat(e.col[0].join(" "),"), rgb(").concat(e.col[1].join(" "),"), rgb(").concat(e.col[2].join(" "),"))")},onClick:()=>S(e),children:(0,i.jsx)("span",{className:"srOnly",children:e.label})},e.id))}),(0,i.jsxs)("div",{className:"segmentColorInputs",children:[(0,i.jsxs)("label",{className:"fieldLabel",children:["Color 1",(0,i.jsx)("input",{type:"color",value:p(null==v?void 0:null===(t=v.col)||void 0===t?void 0:t[0]),onChange:e=>f(0,h(e.target.value))})]}),(0,i.jsxs)("label",{className:"fieldLabel",children:["Color 2",(0,i.jsx)("input",{type:"color",value:p(null==v?void 0:null===(l=v.col)||void 0===l?void 0:l[1]),onChange:e=>f(1,h(e.target.value))})]}),(0,i.jsxs)("label",{className:"fieldLabel",children:["Color 3",(0,i.jsx)("input",{type:"color",value:p(null==v?void 0:null===(n=v.col)||void 0===n?void 0:n[2]),onChange:e=>f(2,h(e.target.value))})]})]})]}),(0,i.jsxs)("div",{className:"controlColumn",children:[(0,i.jsx)("h3",{className:"columnTitle",children:"Effects"}),C.map(e=>{var a;return(0,i.jsxs)("label",{className:"fieldLabel",children:[e.label," (",b(v,e.key),")",(0,i.jsx)("input",{type:"range",min:e.min,max:e.max,step:null!==(a=e.step)&&void 0!==a?a:1,value:b(v,e.key),onChange:a=>x(e.key,Number(a.target.value))})]},e.key)}),(0,i.jsx)("div",{className:"effectList",role:"listbox","aria-label":"Effects",children:N.map(e=>(0,i.jsx)("button",{type:"button",className:e.id===y?"pillButton active":"pillButton",onClick:()=>x("fx",e.id),children:e.label},e.id))})]}),(0,i.jsxs)("div",{className:"controlColumn",children:[(0,i.jsx)("h3",{className:"columnTitle",children:"Segments"}),(0,i.jsxs)("label",{className:"fieldLabel",children:["Active segment",(0,i.jsx)("select",{value:"0",onChange:()=>void 0,children:(0,i.jsx)("option",{value:"0",children:"Segment 0"})})]}),(0,i.jsx)("button",{type:"button",className:"pillButton isDisabled",disabled:!0,"aria-disabled":"true",children:"+ Add segment"}),(0,i.jsxs)("label",{className:"fieldLabel",children:["Transition",(0,i.jsxs)("div",{className:"transitionField",children:[(0,i.jsx)("input",{type:"number",value:"0.7",disabled:!0,"aria-disabled":"true",className:"isDisabled",readOnly:!0}),(0,i.jsx)("span",{children:"s"})]})]})]}),(0,i.jsxs)("div",{className:"controlColumn",children:[(0,i.jsx)("h3",{className:"columnTitle",children:"Presets & Playlist"}),(0,i.jsx)("button",{type:"button",className:"pillButton isDisabled",disabled:!0,"aria-disabled":"true",children:"+ Create preset"}),(0,i.jsx)("button",{type:"button",className:"pillButton isDisabled",disabled:!0,"aria-disabled":"true",children:"Export preset"}),(0,i.jsx)("button",{type:"button",className:"pillButton isDisabled",disabled:!0,"aria-disabled":"true",children:"Create playlist"}),(0,i.jsx)("button",{type:"button",className:"pillButton isDisabled",disabled:!0,"aria-disabled":"true",children:"Export playlist"}),(0,i.jsx)("button",{type:"button",className:"pillButton isDisabled",disabled:!0,"aria-disabled":"true",children:"PC Mode"})]})]})}function x(e){return"number"==typeof e&&Number.isInteger(e)&&e>=0&&e<=255}function S(e,a){let t=Number(e);return Number.isFinite(t)?Math.min(255,Math.max(0,Math.round(t))):a}function f(e){return"object"!=typeof e||null===e||Array.isArray(e)?null:e}function v(e,a){var t;let l=null!==(t=f(e))&&void 0!==t?t:{},i=S(l.fx,0),n=S(l.sx,128),o=S(l.ix,128),r=S(l.pal,0),s=S(l.c1,0),d=S(l.c2,0),c=[[255,170,0],[0,0,0],[0,0,0]];if(Array.isArray(l.col)){let e=l.col.slice(0,3).map(e=>Array.isArray(e)?e.slice(0,3).map(e=>S(e,0)):[0,0,0]);for(;e.length<3;)e.push([0,0,0]);c=e}else void 0!==l.col&&a.push("Ignored invalid seg.col payload; fallback color palette applied");return{fx:i,sx:n,ix:o,pal:r,c1:s,c2:d,col:c}}function y(e){var a;let t,l;let i=[],n=null!==(a=f(e))&&void 0!==a?a:{};"boolean"==typeof n.on?t=n.on:(1===n.on||0===n.on)&&(t=1===n.on),void 0!==n.on&&"boolean"!=typeof n.on&&1!==n.on&&0!==n.on&&i.push("Invalid on field; expected boolean/0/1");let o=S(n.bri,128),r=n.seg;return Array.isArray(r)&&r.length>0?(l=v(r[0],i),r.length>1&&i.push("Multiple segments found; MVP currently applies first segment only")):l=v(r,i),{data:{on:t,bri:o,seg:l},warnings:i}}function w(e){var a;let t=[],l=null!==(a=f(e))&&void 0!==a?a:{},i="matrix"===l.mode?"matrix":"strip";void 0!==l.mode&&"strip"!==l.mode&&"matrix"!==l.mode&&t.push("Invalid topology mode; fallback to strip");let n=Math.max(1,Number.isFinite(Number(l.width))?Math.round(Number(l.width)):60),o=Math.max(1,Number.isFinite(Number(l.height))?Math.round(Number(l.height)):1),r=Math.max(1,Number.isFinite(Number(l.ledCount))?Math.round(Number(l.ledCount)):n*o),s=!!l.serpentine,d=Array.isArray(l.gaps)?l.gaps.map(e=>f(e)).filter(e=>!!e).map(e=>({start:Math.max(0,Math.round(Number(e.start)||0)),length:Math.max(0,Math.round(Number(e.length)||0))})).filter(e=>e.length>0):[];return void 0===l.gaps||Array.isArray(l.gaps)||t.push("Invalid topology gaps field; expected array"),{data:{mode:i,width:n,height:o,ledCount:r,serpentine:s,gaps:d},warnings:t}}function C(e,a){let t=new Blob([a],{type:"application/json"}),l=URL.createObjectURL(t),i=document.createElement("a");i.href=l,i.download=e,i.click(),URL.revokeObjectURL(l)}function N(e){let{state:a}=e,[t,l]=(0,n.useState)("Ready"),o=async e=>{var t;let i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(i)try{let e=await i.text(),t=JSON.parse(e);if(t.hw&&"object"==typeof t.hw){let e=t.hw.led,i={mode:(null==e?void 0:e.matrix)?"matrix":"strip",width:Number(null==e?void 0:e.width)||a.topology.width,height:Number(null==e?void 0:e.height)||a.topology.height,ledCount:Number(null==e?void 0:e.total)||a.topology.ledCount,serpentine:!!(null==e?void 0:e.serpentine),gaps:[]},n=w(i);a.replaceTopology(n.data),l("Imported topology with ".concat(n.warnings.length," warning(s)"));return}let n=t.seg||void 0!==t.on||void 0!==t.bri?t:function(e){let[a]=Object.keys(e);return a?e[a]:null}(t),o=y(n);a.replaceCommand(o.data,o.warnings),l("Imported command with ".concat(o.warnings.length," warning(s)"))}catch(e){l("Import failed: ".concat(String(e)))}finally{e.target.value=""}};return(0,i.jsxs)("section",{className:"panel",children:[(0,i.jsx)("h2",{children:"Import / Export"}),(0,i.jsxs)("div",{className:"actions",children:[(0,i.jsxs)("label",{className:"filePicker",children:["Import cfg/presets",(0,i.jsx)("input",{type:"file",accept:"application/json,.json",onChange:o})]}),(0,i.jsx)("button",{type:"button",onClick:()=>{try{var e,t;let i=(e=a.topology,t=a.command,{cfgJson:function(e){let a={hw:{led:{total:e.ledCount,matrix:"matrix"===e.mode,width:e.width,height:e.height,serpentine:e.serpentine}}},t=function(e){let a=[];return"strip"!==e.mode&&"matrix"!==e.mode&&a.push("mode must be strip or matrix"),(!Number.isInteger(e.ledCount)||e.ledCount<1)&&a.push("ledCount must be a positive integer"),(!Number.isInteger(e.width)||e.width<1)&&a.push("width must be a positive integer"),(!Number.isInteger(e.height)||e.height<1)&&a.push("height must be a positive integer"),{valid:0===a.length,errors:a}}(e);if(!t.valid)throw Error("cfg export failed validation: ".concat(t.errors.join(", ")));return JSON.stringify(a,null,2)}(e),presetsJson:function(e){var a,t;let l=function(e){let a=[];void 0!==e.on&&"boolean"!=typeof e.on&&a.push("on must be a boolean"),void 0===e.bri||x(e.bri)||a.push("bri must be an integer between 0 and 255");let t=Array.isArray(e.seg)?e.seg[0]:e.seg;return t?(void 0===t.fx||x(t.fx)||a.push("seg.fx must be an integer between 0 and 255"),void 0===t.sx||x(t.sx)||a.push("seg.sx must be an integer between 0 and 255"),void 0===t.ix||x(t.ix)||a.push("seg.ix must be an integer between 0 and 255"),void 0===t.pal||x(t.pal)||a.push("seg.pal must be an integer between 0 and 255"),void 0===t.c1||x(t.c1)||a.push("seg.c1 must be an integer between 0 and 255"),void 0===t.c2||x(t.c2)||a.push("seg.c2 must be an integer between 0 and 255"),void 0!==t.col&&(Array.isArray(t.col)&&0!==t.col.length?t.col.forEach((e,t)=>{Array.isArray(e)&&!(e.length<3)&&e.slice(0,3).every(x)||a.push("seg.col[".concat(t,"] must contain 3 byte channels"))}):a.push("seg.col must be a non-empty array"))):a.push("seg is required"),{valid:0===a.length,errors:a}}(e);if(!l.valid)throw Error("presets export failed validation: ".concat(l.errors.join(", ")));return JSON.stringify({0:{n:"Studio Export",on:null===(a=e.on)||void 0===a||a,bri:null!==(t=e.bri)&&void 0!==t?t:128,seg:e.seg}},null,2)}(t)});C("cfg.json",i.cfgJson),C("presets.json",i.presetsJson),l("Exported cfg.json and presets.json")}catch(e){l("Export failed: ".concat(String(e)))}},children:"Export cfg + presets"})]}),(0,i.jsx)("p",{className:"small",children:t})]})}function M(e){let{state:a}=e;return(0,i.jsxs)("section",{className:"panel",children:[(0,i.jsx)("h2",{children:"Raw JSON Command"}),(0,i.jsx)("textarea",{value:a.rawJson,onChange:e=>a.setRawJson(e.target.value),spellCheck:!1,rows:14}),(0,i.jsx)("div",{className:"actions",children:(0,i.jsx)("button",{type:"button",onClick:()=>a.applyRawJson(),children:"Sanitize + Apply"})}),a.warnings.length>0?(0,i.jsx)("ul",{className:"warnings",children:a.warnings.map(e=>(0,i.jsx)("li",{children:e},e))}):null]})}function P(e){let{topology:a,onModeChange:t,onDimensionsChange:l,onLedCountChange:n,onSerpentineChange:o,onGapsChange:r}=e;return(0,i.jsxs)("section",{className:"panelShell cardSection",children:[(0,i.jsx)("h2",{className:"sectionLabel",children:"LED Configuration"}),(0,i.jsxs)("div",{className:"configGrid",children:[(0,i.jsxs)("div",{className:"pillTabs",role:"tablist","aria-label":"Topology mode",children:[(0,i.jsx)("button",{type:"button",role:"tab","aria-selected":"matrix"===a.mode,className:"matrix"===a.mode?"pillButton active":"pillButton",onClick:()=>t("matrix"),children:"Matrix"}),(0,i.jsx)("button",{type:"button",role:"tab","aria-selected":"strip"===a.mode,className:"strip"===a.mode?"pillButton active":"pillButton",onClick:()=>t("strip"),children:"Strip"})]}),"matrix"===a.mode?(0,i.jsxs)("label",{className:"fieldLabel",children:["Width / Height",(0,i.jsxs)("div",{className:"inlineFields",children:[(0,i.jsx)("input",{type:"number",min:1,value:a.width,onChange:e=>l(Number(e.target.value),a.height)}),(0,i.jsx)("span",{className:"orText",children:"x"}),(0,i.jsx)("input",{type:"number",min:1,value:a.height,onChange:e=>l(a.width,Number(e.target.value))})]})]}):(0,i.jsxs)("label",{className:"fieldLabel",children:["Length",(0,i.jsx)("input",{type:"number",min:1,value:a.ledCount,onChange:e=>n(Number(e.target.value))})]}),(0,i.jsxs)("label",{className:"fieldLabel",children:["Pinout",(0,i.jsx)("select",{disabled:!0,"aria-disabled":"true",className:"isDisabled",children:(0,i.jsx)("option",{children:"Default"})})]}),(0,i.jsxs)("label",{className:"fieldLabel",children:[(0,i.jsx)("span",{children:"Serpentine"}),(0,i.jsx)("input",{type:"checkbox",checked:a.serpentine,onChange:e=>o(e.target.checked),disabled:"matrix"!==a.mode,"aria-disabled":"matrix"!==a.mode})]})]}),(0,i.jsxs)("label",{className:"fieldLabel configGapsField",children:["Gaps JSON",(0,i.jsx)("input",{type:"text",placeholder:'[{"start":300,"length":20}]',defaultValue:JSON.stringify(a.gaps),onBlur:e=>r(e.target.value)})]})]})}function j(e){let{canvasRef:a,ledCount:t,simulatedMillis:l,simTickRate:n,lastError:o}=e;return(0,i.jsxs)("section",{className:"panelShell cardSection",children:[(0,i.jsxs)("div",{className:"sectionHeaderRow",children:[(0,i.jsx)("h2",{className:"sectionLabel",children:"LEDs View"}),(0,i.jsxs)("div",{className:"viewMeta",children:[(0,i.jsxs)("span",{children:[t," LEDs"]}),(0,i.jsxs)("span",{children:[l,"ms"]}),(0,i.jsxs)("span",{children:[n," TPS"]}),(0,i.jsx)("span",{className:o?"errorText":"okText",children:o?"Engine Error":"Healthy"})]})]}),(0,i.jsx)("div",{className:"ledViewViewport",children:(0,i.jsx)("canvas",{ref:a,className:"studioCanvas"})})]})}function B(e,a){let t=[],l=[...a].sort((e,a)=>e.start-a.start),i=0,n=0;for(let a=0;a<e;a+=1){for(;i<l.length&&l[i].start<=a;)n+=l[i].length,i+=1;t.push(a+n)}return t}class F{updateTopology(e){this.topology=e,this.rebuildTopology(e)}updateFrame(e){this.frame=e}render(){let e=this.canvas.width,a=this.canvas.height,t=this.ctx;t.clearRect(0,0,e,a),t.fillStyle="#060b12",t.fillRect(0,0,e,a);let l=Math.min(this.positions.length,Math.floor(this.frame.length/3));for(let e=0;e<l;e+=1){var i,n,o;let[a,l]=this.positions[e],r=this.centerX+(a-this.worldMidX)*this.scale,s=this.centerY-(l-this.worldMidY)*this.scale,d=3*e,c=null!==(i=this.frame[d])&&void 0!==i?i:0,u=null!==(n=this.frame[d+1])&&void 0!==n?n:0,m=null!==(o=this.frame[d+2])&&void 0!==o?o:0;0===c&&0===u&&0===m?t.fillStyle="#050505":t.fillStyle="rgb(".concat(c,", ").concat(u,", ").concat(m,")"),t.beginPath(),t.arc(r,s,this.radius,0,2*Math.PI),t.fill()}}resize(){let e=Math.max(1,this.canvas.clientWidth),a=Math.max(1,this.canvas.clientHeight);this.dpr=Math.max(1,Math.min(window.devicePixelRatio||1,2)),this.canvas.width=Math.floor(e*this.dpr),this.canvas.height=Math.floor(a*this.dpr),this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(a,"px"),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(this.dpr,this.dpr),this.centerX=e/2,this.centerY=a/2,this.recomputeProjection()}dispose(){}rebuildTopology(e){let a=B(e.ledCount,e.gaps),t={...e,physicalIndexMap:a};this.positions=function(e){var a;let t=null!==(a=e.physicalIndexMap)&&void 0!==a?a:B(e.ledCount,e.gaps);if("strip"===e.mode){let a=(Math.max(1,e.ledCount+e.gaps.reduce((e,a)=>e+a.length,0))-1)/2;return t.map(e=>[e-a,0,0])}return t.map((a,t)=>{let l=Math.floor(a/e.width),i=a%e.width;e.serpentine&&l%2==1&&(i=e.width-1-i);let n=i-(e.width-1)/2,o=(e.height-1)/2-l;return t>=e.width*e.height?[n,o-Math.floor(t/e.width),0]:[n,o,0]})}(t),this.recomputeProjection()}recomputeProjection(){if(0===this.positions.length){this.scale=1,this.radius=4,this.worldMidX=0,this.worldMidY=0;return}let e=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let i=0;i<this.positions.length;i+=1){let[n,o]=this.positions[i];e=Math.min(e,n),a=Math.max(a,n),t=Math.min(t,o),l=Math.max(l,o)}let i=Math.max(1,this.canvas.clientWidth),n=Math.max(1,this.canvas.clientHeight),o=Math.max(1,a-e+1),r=Math.max(1,l-t+1);this.scale=Math.min(Math.max(1,(i-48)/o),Math.max(1,(n-48)/r)),this.radius=Math.max(2,Math.min(12,.32*this.scale)),this.worldMidX=(e+a)/2,this.worldMidY=(t+l)/2}constructor(e,a){this.positions=[],this.frame=new Uint8Array,this.dpr=1,this.radius=4,this.scale=1,this.centerX=0,this.centerY=0,this.worldMidX=0,this.worldMidY=0,this.canvas=e;let t=e.getContext("2d");if(!t)throw Error("2D canvas context is not available");this.ctx=t,this.topology=a,this.resize(),this.rebuildTopology(a)}}function k(e){let{powerOn:a,running:t,utilityOpen:l,onTogglePower:n,onToggleRunning:o,onToggleUtility:r}=e;return(0,i.jsxs)("header",{className:"topBar panelShell",children:[(0,i.jsxs)("div",{className:"brandMark",children:[(0,i.jsx)("span",{className:"brandDot","aria-hidden":!0,children:"â– "}),(0,i.jsx)("span",{children:"WLED Studio"})]}),(0,i.jsxs)("nav",{className:"topBarActions","aria-label":"Primary controls",children:[(0,i.jsx)("button",{type:"button",className:a?"pillButton active":"pillButton",onClick:n,children:"Power"}),(0,i.jsx)("button",{type:"button",className:t?"pillButton active":"pillButton",onClick:o,children:t?"Pause":"Run"}),(0,i.jsx)("button",{type:"button",className:l?"pillButton active":"pillButton",onClick:r,children:"Utilities"})]})]})}function R(e){let{open:a,onToggle:t,onReset:l,children:n}=e;return(0,i.jsxs)("section",{className:"panelShell utilityDrawer",children:[(0,i.jsxs)("div",{className:"utilityDrawerHeader",children:[(0,i.jsx)("h2",{className:"sectionLabel",children:"Utilities"}),(0,i.jsxs)("div",{className:"utilityActions",children:[(0,i.jsx)("button",{type:"button",className:"pillButton",onClick:l,children:"Reset Clock"}),(0,i.jsx)("button",{type:"button",className:a?"pillButton active":"pillButton",onClick:t,"aria-expanded":a,children:a?"Collapse":"Expand"})]})]}),a?(0,i.jsx)("div",{className:"utilityDrawerBody",children:n}):null]})}let D=e=>{let a;let t=new Set,l=(e,l)=>{let i="function"==typeof e?e(a):e;if(!Object.is(i,a)){let e=a;a=(null!=l?l:"object"!=typeof i||null===i)?i:Object.assign({},a,i),t.forEach(t=>t(a,e))}},i=()=>a,n={setState:l,getState:i,getInitialState:()=>o,subscribe:e=>(t.add(e),()=>t.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},o=a=e(l,i,n);return n},T=e=>e?D(e):D;var E=t(5195);let{useDebugValue:A}=n,{useSyncExternalStoreWithSelector:O}=E,G=!1,I=e=>e,L=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let a="function"==typeof e?T(e):e,t=(e,t)=>(function(e,a=I,t){t&&!G&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),G=!0);let l=O(e.subscribe,e.getState,e.getServerState||e.getInitialState,a,t);return A(l),l})(a,e,t);return Object.assign(t,a),t},z={mode:"matrix",ledCount:900,width:30,height:30,serpentine:!0,gaps:[]},W={on:!0,bri:180,seg:{fx:8,sx:128,ix:128,pal:0,c1:0,c2:0,col:[[255,170,0],[0,0,0],[0,0,0]]}},V={running:!0,simTickRate:30,renderTickRate:60,startMillis:0};function J(e){return JSON.stringify(e,null,2)}function H(e,a,t,l){if("strip"===e){let e=Math.max(1,Math.round(l));return{width:e,height:1,ledCount:e}}let i=Math.max(1,Math.round(a)),n=Math.max(1,Math.round(t));return{width:i,height:n,ledCount:i*n}}let q=(l=(e,a)=>({topology:z,simulation:V,command:W,ui:{drawerOpen:!1},rawJson:J(W),warnings:[],lastError:"",frame:new Uint8Array(3*z.ledCount),simulatedMillis:0,setMode:a=>e(e=>{let t=H(a,e.topology.width,e.topology.height,e.topology.ledCount);return{topology:{...e.topology,mode:a,...t}}}),setDimensions:(a,t)=>e(e=>{let l=H(e.topology.mode,a,t,e.topology.ledCount);return{topology:{...e.topology,...l}}}),setLedCount:a=>e(e=>{let t=Math.max(1,Math.round(a));return"matrix"===e.topology.mode?{}:{topology:{...e.topology,ledCount:t,width:t,height:1}}}),setSerpentine:a=>e(e=>({topology:{...e.topology,serpentine:a}})),setGaps:a=>e(e=>{try{let t=JSON.parse(a),l=w({...e.topology,gaps:t});return{topology:{...e.topology,gaps:l.data.gaps},warnings:l.warnings}}catch(a){return{warnings:['Invalid gaps JSON. Expected format: [{"start":10,"length":2}]'].concat(e.warnings)}}}),setControl:(a,t)=>e(e=>{let l={...e.command,seg:{...Array.isArray(e.command.seg)?e.command.seg[0]:e.command.seg}};if("on"===a&&"boolean"==typeof t)l.on=t;else if("bri"===a&&"number"==typeof t)l.bri=Math.max(0,Math.min(255,Math.round(t)));else if("fx"===a&&"number"==typeof t){var i,n,r,s;let e=l.seg,a=Math.max(0,Math.min(255,Math.round(t)));e.fx=a;let d=function(e){var a;let t=o.find(a=>a.id===e);if(!t)return{};let l=null!==(a=t.metadata.split(";").pop())&&void 0!==a?a:"";if(!l.includes("="))return{};let i={};for(let e of l.split(",")){let[a,t]=e.split("="),l=null==a?void 0:a.trim(),n=Number(t);if(!l||!Number.isFinite(n))continue;let o=Math.max(0,Math.min(255,Math.round(n)));"sx"===l&&(i.sx=o),"ix"===l&&(i.ix=o),"pal"===l&&(i.pal=o),"c1"===l&&(i.c1=o),"c2"===l&&(i.c2=o)}return i}(a);e.sx=null!==(i=d.sx)&&void 0!==i?i:128,e.ix=null!==(n=d.ix)&&void 0!==n?n:128,e.pal=null!==(s=null!==(r=d.pal)&&void 0!==r?r:e.pal)&&void 0!==s?s:0,"number"==typeof d.c1?e.c1=d.c1:delete e.c1,"number"==typeof d.c2?e.c2=d.c2:delete e.c2}else("sx"===a||"ix"===a||"pal"===a||"c1"===a||"c2"===a)&&"number"==typeof t&&(l.seg[a]=Math.max(0,Math.min(255,Math.round(t))));return{command:l,rawJson:J(l)}}),setSegmentColor:(a,t)=>e(e=>{var l;let i=null!==(l=Array.isArray(e.command.seg)?e.command.seg[0]:e.command.seg)&&void 0!==l?l:{},n=Array.isArray(i.col)?i.col.map(e=>Array.isArray(e)&&e.length>=3?[Math.max(0,Math.min(255,Math.round(e[0]))),Math.max(0,Math.min(255,Math.round(e[1]))),Math.max(0,Math.min(255,Math.round(e[2])))]:[0,0,0]):[[255,170,0],[0,0,0],[0,0,0]];for(;n.length<3;)n.push([0,0,0]);n[a]=[Math.max(0,Math.min(255,Math.round(t[0]))),Math.max(0,Math.min(255,Math.round(t[1]))),Math.max(0,Math.min(255,Math.round(t[2])))];let o={...e.command,seg:{...i,col:n}};return{command:o,rawJson:J(o)}}),setColorScheme:a=>e(e=>{let t={...e.command,seg:{...Array.isArray(e.command.seg)?e.command.seg[0]:e.command.seg,pal:Math.max(0,Math.min(255,Math.round(a.pal))),col:a.col.map(e=>{let[a,t,l]=e;return[Math.max(0,Math.min(255,Math.round(a))),Math.max(0,Math.min(255,Math.round(t))),Math.max(0,Math.min(255,Math.round(l)))]})}};return{command:t,rawJson:J(t)}}),setRawJson:a=>e({rawJson:a}),applyRawJson:()=>{let t=a();try{let a=JSON.parse(t.rawJson),l=y(a);return e({command:l.data,warnings:l.warnings}),JSON.stringify(l.data)}catch(a){return e({warnings:["Raw JSON parse error"].concat(t.warnings)}),null}},setRunning:a=>e(e=>({simulation:{...e.simulation,running:a}})),resetClock:()=>e({simulatedMillis:0}),setFrame:(a,t,l)=>e({frame:a,simulatedMillis:t,lastError:l}),replaceTopology:a=>e({topology:a}),replaceCommand:function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e({command:a,rawJson:J(a),warnings:t})},toggleDrawer:()=>e(e=>({ui:{...e.ui,drawerOpen:!e.ui.drawerOpen}}))}))?L(l):L;function Y(){let e=(0,n.useRef)(null),a=(0,n.useRef)(null),l=(0,n.useRef)(null),o=(0,n.useRef)(new Uint8Array),r=(0,n.useRef)(0),[s,d]=(0,n.useState)([]),c=q(),u=(e,a)=>{let t=new Date().toISOString().slice(11,23),l=a?"".concat(t," ").concat(e," ").concat(JSON.stringify(a)):"".concat(t," ").concat(e);console.log("[diag]",l),d(e=>[...e.slice(-9),l])};(0,n.useEffect)(()=>{if(!e.current)return;a.current=new F(e.current,c.topology),u("[StudioShell] renderer initialized",{ledCount:c.topology.ledCount,topology:c.topology});let i=new Worker(t.tu(new URL(t.p+t.u(388),t.b)));i.onmessage=e=>{var a,t,l,i,n,s,d,m,p,h;let b=e.data;if("frame"===b.type&&b.frame){o.current=b.frame,r.current+=1,r.current%30==0&&u("[StudioShell] frame received",{simulatedMillis:null!==(a=b.simulatedMillis)&&void 0!==a?a:0,frameSize:b.frame.length,frameHead:[null!==(t=b.frame[0])&&void 0!==t?t:0,null!==(l=b.frame[1])&&void 0!==l?l:0,null!==(i=b.frame[2])&&void 0!==i?i:0],engineError:null!==(n=b.error)&&void 0!==n?n:""}),c.setFrame(b.frame,null!==(s=b.simulatedMillis)&&void 0!==s?s:0,null!==(d=b.error)&&void 0!==d?d:"");return}"diag"===b.type&&u("[".concat(null!==(m=b.source)&&void 0!==m?m:"worker","] ").concat(null!==(p=b.event)&&void 0!==p?p:"diag"),null!==(h=b.data)&&void 0!==h?h:{})},i.onerror=e=>{console.error("[StudioShell] worker error",e.message,e),u("[StudioShell] worker error",{message:e.message})},u("[StudioShell] postMessage:init",{ledCount:c.topology.ledCount,simTickRate:c.simulation.simTickRate}),i.postMessage({type:"init",ledCount:c.topology.ledCount,simTickRate:c.simulation.simTickRate}),l.current=i;let n=()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.resize()};window.addEventListener("resize",n);let s=0,d=()=>{var e,t;null===(e=a.current)||void 0===e||e.updateFrame(o.current),null===(t=a.current)||void 0===t||t.render(),s=window.requestAnimationFrame(d)};return s=window.requestAnimationFrame(d),()=>{var e;u("[StudioShell] teardown"),window.cancelAnimationFrame(s),window.removeEventListener("resize",n),i.terminate(),null===(e=a.current)||void 0===e||e.dispose(),a.current=null}},[]),(0,n.useEffect)(()=>{var e,t;null===(e=a.current)||void 0===e||e.updateTopology(c.topology),u("[StudioShell] postMessage:topology",{ledCount:c.topology.ledCount,topology:c.topology}),null===(t=l.current)||void 0===t||t.postMessage({type:"topology",ledCount:c.topology.ledCount})},[c.topology]);let m=(0,n.useMemo)(()=>JSON.stringify(c.command),[c.command]);return(0,n.useEffect)(()=>{var e;u("[StudioShell] postMessage:json",{payloadPreview:m.slice(0,220)}),null===(e=l.current)||void 0===e||e.postMessage({type:"json",payload:m})},[m]),(0,n.useEffect)(()=>{var e;u("[StudioShell] postMessage:running",{running:c.simulation.running}),null===(e=l.current)||void 0===e||e.postMessage({type:"running",running:c.simulation.running})},[c.simulation.running]),(0,i.jsxs)("main",{className:"studioDashboard",children:[(0,i.jsx)(k,{powerOn:!!c.command.on,running:c.simulation.running,utilityOpen:c.ui.drawerOpen,onTogglePower:()=>c.setControl("on",!c.command.on),onToggleRunning:()=>c.setRunning(!c.simulation.running),onToggleUtility:c.toggleDrawer}),(0,i.jsx)(P,{topology:c.topology,onModeChange:c.setMode,onDimensionsChange:c.setDimensions,onLedCountChange:c.setLedCount,onSerpentineChange:c.setSerpentine,onGapsChange:c.setGaps}),(0,i.jsx)(j,{canvasRef:e,ledCount:c.topology.ledCount,simulatedMillis:c.simulatedMillis,simTickRate:c.simulation.simTickRate,lastError:c.lastError}),(0,i.jsx)(g,{command:c.command,setControl:c.setControl,setColorScheme:c.setColorScheme,setSegmentColor:c.setSegmentColor}),(0,i.jsxs)(R,{open:c.ui.drawerOpen,onToggle:c.toggleDrawer,onReset:()=>{var e;u("[StudioShell] postMessage:reset"),c.resetClock(),null===(e=l.current)||void 0===e||e.postMessage({type:"reset"})},children:[(0,i.jsxs)("div",{className:"utilityStatusGrid",children:[(0,i.jsxs)("span",{children:["LEDs: ",c.topology.ledCount]}),(0,i.jsxs)("span",{children:["Sim time: ",c.simulatedMillis,"ms"]}),(0,i.jsxs)("span",{children:["Target sim: ",c.simulation.simTickRate," TPS"]}),(0,i.jsx)("span",{className:c.lastError?"errorText":"okText",children:c.lastError?c.lastError:"No engine errors"})]}),(0,i.jsx)("pre",{className:"diagLog",children:s.length>0?s.join("\n"):"No diagnostics yet"}),(0,i.jsxs)("div",{className:"utilityPanels",children:[(0,i.jsx)(N,{state:{topology:c.topology,command:c.command,replaceTopology:c.replaceTopology,replaceCommand:c.replaceCommand}}),(0,i.jsx)(M,{state:{rawJson:c.rawJson,setRawJson:c.setRawJson,applyRawJson:c.applyRawJson,warnings:c.warnings}})]})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=9912)}),_N_E=e.O()}]);